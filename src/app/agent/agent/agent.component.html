<app-header [game]="agent?agent.game.name:''">
</app-header>
<main>
  <section *ngIf="status=='created'">
    La partie n'a pas encore commencée, soyez patient, préparez carnet de note, revolver et autre montre à gousset.
  </section>
  <section *ngIf="status=='started' && agent && agent.status == 'alive'" class="life">
      <mat-icon [ngClass]="{'red': agent.life>=1}">favorite</mat-icon>
      <mat-icon [ngClass]="{'red': agent.life>=2}">favorite</mat-icon>
      <mat-icon [ngClass]="{'red': agent.life>=3}">favorite</mat-icon>
      <mat-icon [ngClass]="{'red': agent.life>=4}">favorite</mat-icon>
      <mat-icon [ngClass]="{'red': agent.life>=5}">favorite</mat-icon>
    </section>
  <section *ngIf="status=='started' && agent.status == 'dead'" >
    Vous êtes mort.
  </section>
  <section *ngIf="status=='started' && agent.status == 'alive'">
      <div class="agent-line">
        <h3>
          <mat-icon>account_circle</mat-icon> Identité
        </h3>
        {{agent.name}}
        <button mat-raised-button (click)="showRole()" style="float: right">
          Mon rôle
        </button>
      </div>
      <div class="agent-line">
        <h3>
          <mat-icon>gps_fixed</mat-icon> Cible
        </h3>
        {{agent.target.name}}
        
      </div>
      <div class="agent-line">
        <h3>
          <mat-icon>work</mat-icon> Mission
        </h3>
        <p>{{agent.mission.title}}</p>
      </div>
      <p class="text-center">
        <button mat-raised-button *ngIf="agent.life>1" (click)="changeMission()">
          <mat-icon>next_week</mat-icon>
          Changer de mission
        </button>
        <button mat-raised-button (click)="suicide()">
          Se suicider
        </button>
      </p>
  </section>
  <section *ngIf="status=='finished'">
    La partie est terminée. Préparez vous pour une prochaine mission, plutôt que de vouleur ressasser le passé.
  </section>
</main>

<footer *ngIf="status=='started' && agent.status == 'alive'">
  <button mat-raised-button color="primary" (click)="kill()">Tuer</button>
  <button mat-raised-button color="primary" (click)="unmask()">Démasquer</button>
</footer>

<div class="wait-overlay" *ngIf="waitResponse">
  <h2>Attente de réponse</h2>
  <div class="arc">
    <div class="arc-cube"></div>
  </div>
</div>

<div class="wait-overlay" *ngIf="showConfirmKill">
  <h2>Vous venez d'être tué</h2>
  <mat-card>
      <mat-card-content>
          Pour valider ce meurtre cliquez sur le bouton ci dessous
      </mat-card-content>
      <mat-card-actions>
        <button mat-raised-button (click)="confirmKill(true)"><mat-icon>check</mat-icon> Mourir avec classe</button>
      </mat-card-actions>
  </mat-card>
  <mat-card>
      <mat-card-content>
          Vous n'êtes pas d'accord avec cette action, il vous reste un recours
      </mat-card-content>
      <mat-card-actions>
          <button mat-raised-button (click)="confirmKill(false)"><mat-icon>account_balance</mat-icon> Convoquer le tribunal</button>
      </mat-card-actions>
  </mat-card>
</div>

  <div class="wait-overlay" *ngIf="showConfirmUnmask">
    <h2>Vous venez d'être démasqué</h2>
    <mat-card>
        <mat-card-content>
            Pour valider votre décès cliquez sur le bouton ci dessous
        </mat-card-content>
        <mat-card-actions>
          <button mat-raised-button (click)="confirmUnmask(true)"><mat-icon>check</mat-icon> Mourir avec classe</button>
        </mat-card-actions>
    </mat-card>
    <mat-card>
        <mat-card-content>
            Vous n'êtes pas d'accord avec cette action, il vous reste un recours
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button (click)="confirmUnmask(false)"><mat-icon>account_balance</mat-icon> Convoquer le tribunal</button>
        </mat-card-actions>
    </mat-card>
  </div>

